<div id="tt"></div>
<script type="text/javascript">
easyloader.load(['datagrid', 'datagridscrollview'], function(){
	var toolbar = [{
		text:'local',
		iconCls:'icon-search',
		handler:function(){load('local');}
	},'-',{
		text:'remote',
		iconCls:'icon-reload',
		handler:function(){load('remote');}
	},{
		text:'scrollview',
		iconCls:'icon-ok',
		handler:function(){loadlargdata()}
	}], date1;
	
	
	
	$('#tt').datagrid({
		view:scrollview,
		height:'100%',
		rownumbers:true,
		singleSelect:true,
		border:false,
		toolbar:toolbar,
		//url:'server/json/datagrid27_getdata.json',
		method:'get',
		striped:true,
		fitColumns: false,
		idField:'inv',
		autoRowHeight:false,
		pageSize:50,
		columns:[[
			{field:'inv',title:'inv',width:80,},
			{field:'date',title:'Code',width:100},
			{field:'name',title:'Name',width:100},
			{field:'amount',title:'amount',width:80,align:'right'},
			{field:'price',title:'Price',width:80,align:'right'},
			{field:'cost',title:'cost',width:100,align:'right'},
			{field:'note',title:'note',width:100,align:'right'}
		]],
		onLoadSuccess:function(data){
			$('#tt').datagrid('loaded');
			var date2=new Date();    //结束时间
			var date3=(date2.getTime()-date1.getTime())/1000  //时间差的毫秒数
			$.messager.show({
				title:'Info',
				msg:'Load '+data.total+' records successfully time consuming: ' + date3 + 's'
			});
			date1 = new Date();
		}

	});
	//$('#tt').datagrid('getPanel').removeClass('lines-both lines-no lines-right lines-bottom').addClass('lines-right');
	function loadLocal(){
		$('#tt').datagrid('loading');
		date1 = new Date();    //开始时间
		var rows = [];
		for(var i=1; i<=100000; i++){
			var amount = Math.floor(Math.random()*1000);
			var price = Math.floor(Math.random()*1000);
			rows.push({
				inv: 'Inv No '+i,
				date: $.fn.datebox.defaults.formatter(new Date()),
				name: 'Name '+i,
				amount: amount,
				price: price,
				cost: amount*price,
				note: 'Note '+i
			});
		}
		$('#tt').datagrid('loadData', rows);
	}
	function loadlargdata(){
		date1 = new Date();    //结束时间
		$('#tt').datagrid('loading');
		$.getJSON('server/json/datagrid25_getdata.json', function(data){
			$('#tt').datagrid('loadData', data);
		});
	}
	function load(mode){
		
		if (mode == 'local'){
			loadLocal();
		} else if(mode == 'remote') {
			$('#tt').datagrid('loading');
			date1=new Date();    //结束时间
			$('#tt').datagrid({
				url:'server/json/datagrid27_getdata.json'
			});
		}else if(mode == 'largdata'){
			loadlargdata();
		}
	}
});
</script>
<style type="text/css">
	.lines-both .datagrid-body td{
	}
	.lines-no .datagrid-body td{
		border-right:1px dotted transparent;
		border-bottom:1px dotted transparent;
	}
	.lines-right .datagrid-body td{
		border-bottom:1px dotted transparent;
	}
	.lines-bottom .datagrid-body td{
		border-right:1px dotted transparent;
	}
</style>