<div name="toolbar">
	<select class="easyui-combobox" data-options="panelHeight:'auto',width:'auto'">
		<option action>全部</option>
		<option>已删除</option>
		<option>未删除</option>
	</select>
	<input class="easyui-textbox" data-options="width:120">
	<a href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-ZoomClassic_custom'">搜索</a>
	<span class="datagrid-btn-separator" style="vertical-align: middle;display:inline-block;float:none"></span>
	<a href="#" class="easyui-linkbutton" data-options="plain:true,iconCls:'icon-ImportExcel'">导出</a>
	<div name="ExportExcel"></div>
	<span class="datagrid-btn-separator" style="vertical-align: middle;display:inline-block;float:none"></span>
	<div name="new"></div>
</div>
<script type="text/javascript">
	easyloader.load(['datagridscrollview', 'splitbutton', 'menubutton', 'datagridrenderstyler'], function(){
		var listdatagrid = $('<div>'),
			tabs = $('#center').tabs('getSelected'),
			Paramet = getMenuParameter(tabs),
			layout = tabs.find('.layout'),
			centerpanel = layout.layout('panel', 'center'),
			localbtn = $('<div>'),
			loadmenu = $('<div>'),
			ExportExcelbox = $('<div>'),
			edit = function(rowIndex, rowData){//打开编辑layout面板函数，参数点击行带入 2018-4-22 zz
				//console.log(rowIndex)
				//console.log(rowData)
				var e;
				if(Paramet.edit == 'undefined' || Paramet.edit == ''){//判断菜单参数
					e = "bi/edit"//如果没有edit参数，赋值默认编辑地址
				}else{
					e = Paramet.edit;//如果有edit参数，赋值参数编辑地址
				}

				layout.layout('remove', 'east');//删除编辑layout

				layout.layout('add',{//添加新的layout
					region: 'east',
					width: 400,
					maxWidth: '50%',
					minWidth: 300,
					title: '',
					href:'client/SimpChinese/'+e+'/',
					hideExpandTool:false,
					hideCollapsedContent:false,
					border:false,
					split: true
				});
			};
			
		
		centerpanel.append(listdatagrid);

		ExportExcelbox.menu({
			width:100
		}).menu('appendItem', {
			text: '下载模板',
			iconCls:'icon-FileSaveAsExcelXlsx'
		});
		
		centerpanel.find('div[name=ExportExcel]').splitbutton({
			iconCls: 'icon-ExportExcel',
			text:'导入',
			menu: ExportExcelbox
		});
		
		centerpanel.find('div[name=new]').linkbutton({
			text:'新建',
			iconCls:'icon-file',
			onClick:edit
		}).addClass('l-btn-plain');
		

		$.getJSON('server/bi/style/?template='+Paramet.style+'&v=' + (new Date()).getTime(), function(result){
			if(result){				
				listdatagrid.datagrid({
					view:scrollview,
					pageSize:50,
					remoteSort:false,
					rownumbers:true,
					singleSelect:true,
					pagination:false,
					border:false,
					fit:false,
					fitColumns:false,
					striped:true,
					url:'server/bi/list/?template='+Paramet.template+'&v=' + (new Date()).getTime(),
					method:'get',
					toolbar:centerpanel.find('div[name=toolbar]'),
					multiSort:false,
					checkOnSelect:false,
					columns:result,
					height: '100%',
					onClickRow: edit
				}).datagrid('renderformatterstyler');

			}
		});
	});
</script>