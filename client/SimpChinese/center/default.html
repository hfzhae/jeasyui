<script type="text/javascript">
	$.extend($.fn.tabs.defaults, {//关闭tab时判断是否存在编辑未保存的页面对象的tabs扩展 2018-4-25 zz
		onBeforeClose: function(title,index){
			var target = this,
				editstatus = $(target).tabs('getTab', index).panel('options').editstatus;
			if(editstatus){
				ebx.EditStatusMessager(editstatus,title,function(){
					var opts = $(target).tabs('options');
					var bc = opts.onBeforeClose;
					opts.onBeforeClose = function(){};  // allowed to close now
					$(target).tabs('close',index);
					opts.onBeforeClose = bc;  // restore the event function
				});
				return false;	// prevent from closing
			}
		}
	});

	ebx.center = $('<div>').appendTo(ebx.bodylayout.layout('panel', 'center'));
	
	ebx.center.tabs({
		fit:true,
		border:false,
		plain:false,
		tabPosition:'bottom',
		tools:[{
			iconCls:'icon-DeclineInvitation',
			handler:function(){
				var arrTitle = new Array(),
					centertabs = ebx.center.tabs("tabs"),
					tCount = centertabs.length;
					
				if(tCount>0){  
					for(var i=0;i<tCount;i++){
						if(centertabs[i].panel('options').closable){
							arrTitle.push(centertabs[i].panel('options').index);
						}
					}
					
					for(var i in arrTitle){  
						console.log(arrTitle[i]);
						ebx.center.tabs("close",arrTitle[i]);  
					}  
				}  
			}
		},{
			iconCls:'icon-expand2',
			handler:function(){
				ebx.bodylayout.layout('collapse','west');
				$(ebx.center).find('.icon-contract2').parent().parent().parent().show();
				$(ebx.center).find('.icon-expand2').parent().parent().parent().hide();
			}
		},{
			iconCls:'icon-contract2',
			handler:function(){
				ebx.bodylayout.layout('expand','west');
				$(ebx.center).find('.icon-expand2').parent().parent().parent().show();
				$(ebx.center).find('.icon-contract2').parent().parent().parent().hide();
			}
		}]
	}).tabs('add', {
		title:'首页',
		iconCls:'tabs-home32_1',
		href:'client/SimpChinese/home/',
		selected: true,
		closable:false
	}).tabs({
		onSelect: function(title, index){
			//if(index == 0)$('#homeDiv').portal('resize');

			var tb = $(this);
			setTimeout(function(){
				tb.tabs('resize');//重新计算页面尺寸布局
			},0);
			
		}
	});
	
	$(ebx.center).find('.icon-contract2').parent().parent().parent().hide();
	ebx.center.tabs('resize');
	
</script>
